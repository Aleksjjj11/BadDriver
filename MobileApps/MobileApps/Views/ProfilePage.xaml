<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ext="clr-namespace:MobileApps.Models"
             xmlns:viewModels="clr-namespace:MobileApps.ViewModels;assembly=MobileApps"
             BackgroundColor="White"
             x:DataType="viewModels:ProfileViewModel"
             x:Class="MobileApps.Views.ProfilePage" NavigationPage.HasNavigationBar="True">
    <ContentPage.Content>
        <RefreshView RefreshColor="{StaticResource Primary1}"
                     IsRefreshing="{Binding IsBusy, Mode=OneWay}"
                     Command="{Binding UpdateUserCommand}">
            <ScrollView>
                <StackLayout Orientation="Vertical" Padding="10">
                    <Frame>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="6*" />
                            </Grid.ColumnDefinitions>
                            <Frame Grid.Column="0"
                                   Padding="0"
                                   CornerRadius="100"
                                   IsClippedToBounds="True"
                                   HeightRequest="100"
                                   WidthRequest="100">
                                <ImageButton Source="_0__settings.png"
                                             Command="{Binding OpenSettings}"
                                             HeightRequest="150"
                                             WidthRequest="150"
                                             HorizontalOptions="Center"
                                             VerticalOptions="Center"
                                             BackgroundColor="{StaticResource SecondaryBShade1_3}" />
                            </Frame>

                            <StackLayout Grid.Column="1"
                                         HorizontalOptions="Center">
                                <Label Text="{Binding Path=User.Username, Mode=OneWay}"
                                       TextColor="Black"
                                       FontSize="Title" />
                                <Label Text="{Binding Path=User.FirstName}"
                                       TextColor="DimGray"
                                       FontSize="Large" />
                                <Label Text="{Binding Path=User.LastName, Mode=OneWay}"
                                       TextColor="DimGray"
                                       FontSize="Large" />
                            </StackLayout>
                        </Grid>
                    </Frame>
                    <Frame HeightRequest="150">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="2*" />
                                <RowDefinition Height="8*" />
                            </Grid.RowDefinitions>
                            <Label Grid.Row="0"
                                   Text="Ваши достижения"
                                   HorizontalTextAlignment="Center"
                                   FontSize="Large"
                                   TextColor="Black" />
                            <CarouselView Grid.Row="1" />
                        </Grid>
                    </Frame>
                    <Frame HeightRequest="100">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Label Grid.Row="0"
                                   Grid.Column="0"
                                   FontSize="Medium"
                                   TextColor="DodgerBlue"
                                   Text="В обработке:" />
                            <Label Grid.Row="0"
                                   Grid.Column="1"
                                   FontSize="Medium"
                                   Margin="10, 0"
                                   TextColor="DodgerBlue"
                                   Text="{Binding Path=User.CountProcessing, Mode=OneWay}" />
                            <Label Grid.Row="1"
                                   Grid.Column="0"
                                   FontSize="Medium"
                                   TextColor="ForestGreen"
                                   Text="Принято:" />
                            <Label Grid.Row="1"
                                   Grid.Column="1"
                                   FontSize="Medium"
                                   TextColor="ForestGreen"
                                   Margin="10, 0"
                                   Text="{Binding Path=User.CountAccepted, Mode=OneWay}" />
                            <Label Grid.Row="2"
                                   Grid.Column="0"
                                   FontSize="Medium"
                                   TextColor="DarkRed"
                                   Text="Отклонено:" />
                            <Label Grid.Row="2"
                                   Grid.Column="1"
                                   FontSize="Medium"
                                   TextColor="DarkRed"
                                   Margin="10, 0"
                                   Text="{Binding Path=User.CountDeclined, Mode=OneWay}" />
                        </Grid>
                    </Frame>
                </StackLayout>
            </ScrollView>
        </RefreshView>
    </ContentPage.Content>
</ContentPage>